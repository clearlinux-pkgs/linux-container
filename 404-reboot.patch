--- linux-4.0/kernel/reboot.c~	2015-04-12 18:12:50.000000000 -0400
+++ linux-4.0/kernel/reboot.c	2015-05-06 09:45:56.991894271 -0400
@@ -309,7 +309,7 @@
 	 * halt when pm_power_off is not set do it the easy way.
 	 */
 	if ((cmd == LINUX_REBOOT_CMD_POWER_OFF) && !pm_power_off)
-		cmd = LINUX_REBOOT_CMD_HALT;
+		cmd = LINUX_REBOOT_CMD_RESTART;
 
 	mutex_lock(&reboot_mutex);
 	switch (cmd) {
--- linux-4.0/kernel/reboot.c~	2015-05-06 09:45:56.000000000 -0400
+++ linux-4.0/kernel/reboot.c	2015-05-08 09:43:18.178582429 -0400
@@ -326,7 +326,7 @@
 		break;
 
 	case LINUX_REBOOT_CMD_HALT:
-		kernel_halt();
+		kernel_restart(NULL);
 		do_exit(0);
 		panic("cannot halt");
 
